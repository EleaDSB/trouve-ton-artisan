import './polyfills.server.mjs';
import{a as R,b as x,c as q,d as Y,f as W,g as J,h as K,i as Q,k as X}from"./chunk-5LXP4PMQ.mjs";import{a as S}from"./chunk-BNXZKL67.mjs";import{a as Z}from"./chunk-AXWK7B4B.mjs";import{$ as T,A as I,B as d,C as u,F as j,Ja as V,Ka as A,La as z,Q as y,Qa as G,R as o,S as v,Ua as B,Y as g,_ as c,aa as e,ba as t,ca as m,cb as H,da as F,ea as C,fa as b,fb as N,ga as M,ha as a,ia as h,ja as _,jb as U,m as w,p as E,pa as L,q as k,t as O,z as P,za as D}from"./chunk-YVPI354I.mjs";import"./chunk-VVCT4QZE.mjs";var $=(()=>{class n{constructor(i){this.http=i,this.apiUrl="/api/contact"}sendContactEmail(i){return this.http.post(this.apiUrl,i)}static{this.\u0275fac=function(s){return new(s||n)(E(G))}}static{this.\u0275prov=w({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ne(n,p){n&1&&(e(0,"div",7),m(1,"div",8),e(2,"p",9),a(3,"Chargement..."),t()())}function ie(n,p){n&1&&(e(0,"div",7),d(),e(1,"svg",10),m(2,"path",11),t(),u(),e(3,"h2",12),a(4,"Artisan non trouv\xE9"),t(),e(5,"p",13),a(6,"L'artisan que vous recherchez n'existe pas."),t()())}function re(n,p){if(n&1&&(e(0,"p",65),a(1),t()),n&2){let i=b(2);o(),h(i.artisan.entreprise)}}function ae(n,p){n&1&&(d(),e(0,"svg",66),m(1,"path",67),t())}function oe(n,p){if(n&1&&(e(0,"div",68)(1,"a",69),d(),e(2,"svg",3),m(3,"path",70),t(),a(4," Voir le site web "),t()()),n&2){let i=b(2);o(),c("href",i.artisan.siteWeb,y)}}function se(n,p){if(n&1&&(e(0,"div",71),a(1),t()),n&2){let i=b(2);T("bg-green-50",i.contactMessageType==="success")("text-green-800",i.contactMessageType==="success")("bg-red-50",i.contactMessageType==="error")("text-red-800",i.contactMessageType==="error"),o(),_(" ",i.contactMessage," ")}}function le(n,p){n&1&&(e(0,"div",72),a(1," Le nom est requis "),t())}function me(n,p){n&1&&(e(0,"div",72),a(1," Un email valide est requis "),t())}function ce(n,p){n&1&&(e(0,"div",72),a(1," L'objet est requis "),t())}function de(n,p){n&1&&(e(0,"div",72),a(1," Le message est requis (minimum 10 caract\xE8res) "),t())}function pe(n,p){n&1&&(d(),e(0,"svg",73),m(1,"circle",74)(2,"path",75),t())}function ge(n,p){n&1&&(d(),e(0,"svg",3),m(1,"path",76),t())}function ue(n,p){if(n&1){let i=F();e(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),d(),e(4,"svg",18),m(5,"path",19),t()(),u(),e(6,"div",20)(7,"h1",21),a(8),t(),g(9,re,2,1,"p",22),t()(),e(10,"div",23)(11,"div",24),g(12,ae,2,0,"svg",25),t(),e(13,"span",26),a(14),t()(),e(15,"div",27)(16,"div",28),d(),e(17,"svg",29),m(18,"path",30),t(),u(),e(19,"span",31),a(20),t()(),e(21,"div",28),d(),e(22,"svg",29),m(23,"path",32)(24,"path",33),t(),u(),e(25,"span",31),a(26),t()()(),g(27,oe,5,1,"div",34),t(),e(28,"div",15)(29,"h2",35),d(),e(30,"svg",36),m(31,"path",37),t(),a(32," \xC0 propos "),t(),u(),e(33,"p",38),a(34),t(),e(35,"div",39)(36,"h3",40),a(37,"Coordonn\xE9es"),t(),e(38,"div",41)(39,"a",42),d(),e(40,"svg",43),m(41,"path",44),t(),u(),e(42,"span",45),a(43),t()(),e(44,"a",42),d(),e(45,"svg",43),m(46,"path",46),t(),u(),e(47,"span",45),a(48),t()()()()(),e(49,"div",47)(50,"h2",35),d(),e(51,"svg",36),m(52,"path",48),t(),a(53),t(),g(54,se,2,9,"div",49),u(),e(55,"form",50),C("ngSubmit",function(){P(i);let l=b();return I(l.onSubmit())}),e(56,"div")(57,"label",51),a(58," Nom complet "),e(59,"span",52),a(60,"*"),t()(),m(61,"input",53),g(62,le,2,0,"div",54),t(),e(63,"div")(64,"label",55),a(65," Email "),e(66,"span",52),a(67,"*"),t()(),m(68,"input",56),g(69,me,2,0,"div",54),t(),e(70,"div")(71,"label",57),a(72," Objet "),e(73,"span",52),a(74,"*"),t()(),m(75,"input",58),g(76,ce,2,0,"div",54),t(),e(77,"div")(78,"label",59),a(79," Message "),e(80,"span",52),a(81,"*"),t()(),m(82,"textarea",60),g(83,de,2,0,"div",54),t(),e(84,"div",61)(85,"button",62),g(86,pe,3,0,"svg",63)(87,ge,2,0,"svg",64),a(88),t()()()()()}if(n&2){let i,s,l,f,r=b();o(8),h(r.artisan.nom),o(),c("ngIf",r.artisan.entreprise),o(3),c("ngForOf",r.getStars(r.artisan.note)),o(2),_("",r.artisan.note,"/5"),o(6),h(r.artisan.specialite),o(6),h(r.artisan.ville),o(),c("ngIf",r.artisan.siteWeb),o(7),h(r.artisan.aPropos),o(5),M("href","tel:",r.artisan.telephone,"",y),o(4),h(r.artisan.telephone),o(),M("href","mailto:",r.artisan.email,"",y),o(4),h(r.artisan.email),o(5),_(" Contacter ",r.artisan.nom," "),o(),c("ngIf",r.contactMessage),o(),c("formGroup",r.contactForm),o(7),c("ngIf",((i=r.contactForm.get("nom"))==null?null:i.invalid)&&((i=r.contactForm.get("nom"))==null?null:i.touched)),o(7),c("ngIf",((s=r.contactForm.get("email"))==null?null:s.invalid)&&((s=r.contactForm.get("email"))==null?null:s.touched)),o(7),c("ngIf",((l=r.contactForm.get("objet"))==null?null:l.invalid)&&((l=r.contactForm.get("objet"))==null?null:l.touched)),o(7),c("ngIf",((f=r.contactForm.get("message"))==null?null:f.invalid)&&((f=r.contactForm.get("message"))==null?null:f.touched)),o(2),c("disabled",r.contactForm.invalid||r.isSubmitting),o(),c("ngIf",r.isSubmitting),o(),c("ngIf",!r.isSubmitting),o(),_(" ",r.isSubmitting?"Envoi...":"Envoyer le message"," ")}}var Oe=(()=>{class n{constructor(i,s,l,f,r){this.route=i,this.router=s,this.artisansService=l,this.emailService=f,this.fb=r,this.artisan=null,this.isLoading=!0,this.contactMessage="",this.contactMessageType="success",this.isSubmitting=!1,this.destroyRef=k(j),this.cdr=k(D),this.contactForm=this.fb.group({nom:["",[x.required,x.minLength(2)]],email:["",[x.required,x.email]],objet:["",[x.required,x.minLength(3)]],message:["",[x.required,x.minLength(10)]]})}ngOnInit(){this.loadArtisanDetails()}loadArtisanDetails(){let i=this.route.snapshot.paramMap.get("id");if(!i){this.isLoading=!1,this.cdr.markForCheck();return}this.artisansService.getArtisanById(parseInt(i,10)).pipe(S(this.destroyRef)).subscribe({next:s=>{this.artisan=s||null,this.isLoading=!1,this.cdr.markForCheck()},error:s=>{console.error("Erreur lors du chargement de l'artisan:",s),this.isLoading=!1,this.cdr.markForCheck()}})}getStars(i){let s=Math.floor(i);return Array(s).fill(0)}goBack(){this.router.navigate(["/artisans"])}onSubmit(){if(this.contactForm.invalid||!this.artisan||!this.artisan.email)return;this.isSubmitting=!0,this.contactMessage="";let i=this.contactForm.value,s={nom:i.nom,email:i.email,objet:i.objet,message:i.message,artisanEmail:this.artisan.email,artisanNom:this.artisan.nom};this.emailService.sendContactEmail(s).pipe(S(this.destroyRef)).subscribe({next:l=>{l.success?(this.contactMessage=l.message||"Votre message a \xE9t\xE9 envoy\xE9 avec succ\xE8s ! L'artisan vous r\xE9pondra sous 48h.",this.contactMessageType="success",this.contactForm.reset()):(this.contactMessage=l.error||"Une erreur est survenue lors de l'envoi.",this.contactMessageType="error"),this.isSubmitting=!1,this.cdr.markForCheck(),setTimeout(()=>{this.contactMessage="",this.cdr.markForCheck()},5e3)},error:l=>{console.error("Erreur lors de l'envoi du message:",l),this.contactMessage=l.error?.error||"Une erreur est survenue lors de l'envoi du message. Veuillez r\xE9essayer.",this.contactMessageType="error",this.isSubmitting=!1,this.cdr.markForCheck(),setTimeout(()=>{this.contactMessage="",this.cdr.markForCheck()},5e3)}})}static{this.\u0275fac=function(s){return new(s||n)(v(H),v(N),v(Z),v($),v(Q))}}static{this.\u0275cmp=O({type:n,selectors:[["app-artisan-details"]],standalone:!0,features:[L],decls:9,vars:3,consts:[[1,"min-h-screen","bg-primary-light",2,"padding-top","30px"],[1,"container","mb-6"],[1,"flex","items-center","px-4","py-3","bg-accent-green","text-white","rounded-lg","hover:bg-green-600","transition-colors","duration-200",2,"margin-left","0","margin-right","auto","display","inline-flex",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["class","container py-16 text-center",4,"ngIf"],["class","container pb-8",4,"ngIf"],[1,"container","py-16","text-center"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-primary"],[1,"mt-4","text-gray-600","text-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"],[1,"text-xl","font-bold","text-text-dark","mb-2"],[1,"text-gray-600","text-sm"],[1,"container","pb-8"],[1,"bg-white","rounded-lg","shadow-lg","p-4","mb-6"],[1,"flex","items-start","space-x-6","mb-4"],[1,"w-12","h-12","bg-primary","rounded-full","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"flex-1","min-w-0"],[1,"text-xl","font-bold","text-text-dark","leading-tight"],["class","text-primary font-semibold text-sm mt-1",4,"ngIf"],[1,"flex","items-center","space-x-2","mb-4"],[1,"flex","space-x-1"],["class","w-4 h-4 text-yellow-400 fill-current","viewBox","0 0 20 20",4,"ngFor","ngForOf"],[1,"text-sm","font-semibold","text-text-dark"],[1,"space-y-2","mb-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-primary","mr-4","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.78 0-2.678-2.153-1.415-3.414l5-5A2 2 0 009 11.172V5L8 4z"],[1,"text-text-dark","text-sm"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","pt-3 border-t border-gray-100",4,"ngIf"],[1,"text-lg","font-bold","text-text-dark","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-primary","mr-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-gray-700","text-sm","leading-relaxed","mb-4"],[1,"border-t","border-gray-100","pt-4"],[1,"font-semibold","text-text-dark","mb-3","text-sm"],[1,"space-y-3"],[1,"flex","items-center","text-primary","hover:text-primary-dark","transition-colors",3,"href"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-4","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],[1,"text-sm"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"bg-white","rounded-lg","shadow-lg","p-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"],["class","p-3 rounded-lg mb-4 text-sm",3,"bg-green-50","text-green-800","bg-red-50","text-red-800",4,"ngIf"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","nom",1,"block","text-sm","font-medium","text-text-dark","mb-2"],[1,"text-red-500"],["id","nom","type","text","formControlName","nom","placeholder","Votre nom complet",1,"w-full","px-4","py-3","text-sm","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-primary","focus:border-transparent"],["class","mt-1 text-xs text-red-600",4,"ngIf"],["for","email",1,"block","text-sm","font-medium","text-text-dark","mb-2"],["id","email","type","email","formControlName","email","placeholder","votre.email@exemple.com",1,"w-full","px-4","py-3","text-sm","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-primary","focus:border-transparent"],["for","objet",1,"block","text-sm","font-medium","text-text-dark","mb-2"],["id","objet","type","text","formControlName","objet","placeholder","L'objet de votre message",1,"w-full","px-4","py-3","text-sm","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-primary","focus:border-transparent"],["for","message",1,"block","text-sm","font-medium","text-text-dark","mb-2"],["id","message","formControlName","message","rows","4","placeholder","D\xE9crivez votre demande...",1,"w-full","px-4","py-3","text-sm","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-primary","focus:border-transparent","resize-none"],[1,"flex","justify-center","mt-6"],["type","submit",1,"px-8","py-4","bg-primary","text-white","text-base","font-semibold","rounded-lg","hover:bg-primary-dark","transition-colors","duration-200","disabled:opacity-50","flex","items-center","justify-center","min-w-[200px]",3,"disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","w-5 h-5 mr-3","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"text-primary","font-semibold","text-sm","mt-1"],["viewBox","0 0 20 20",1,"w-4","h-4","text-yellow-400","fill-current"],["d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"],[1,"pt-3","border-t","border-gray-100"],["target","_blank","rel","noopener noreferrer",1,"inline-flex","items-center","w-full","justify-center","px-6","py-3","bg-primary","text-white","text-base","rounded-lg","hover:bg-primary-dark","transition-colors","duration-200",3,"href"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"],[1,"p-3","rounded-lg","mb-4","text-sm"],[1,"mt-1","text-xs","text-red-600"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 19l9 2-9-18-9 18 9-2zm0 0v-8"]],template:function(s,l){s&1&&(e(0,"div",0)(1,"div",1)(2,"button",2),C("click",function(){return l.goBack()}),d(),e(3,"svg",3),m(4,"path",4),t(),a(5," Retour \xE0 la liste "),t()(),g(6,ne,4,0,"div",5)(7,ie,7,0,"div",5)(8,ue,89,25,"div",6),t()),s&2&&(o(6),c("ngIf",l.isLoading),o(),c("ngIf",!l.isLoading&&!l.artisan),o(),c("ngIf",!l.isLoading&&l.artisan))},dependencies:[z,V,A,U,X,W,R,q,Y,J,K,B],styles:['@charset "UTF-8";[_nghost-%COMP%]{--primary-light: #f1f8fc;--primary: #0074c7;--primary-dark: #00497c;--text-dark: #384050;--accent-red: #cd2c2e;--accent-green: #82b864}.bg-primary-light[_ngcontent-%COMP%]{background-color:var(--primary-light)}.bg-primary[_ngcontent-%COMP%]{background-color:var(--primary)}.bg-accent-green[_ngcontent-%COMP%]{background-color:var(--accent-green)}.text-primary[_ngcontent-%COMP%]{color:var(--primary)}.text-primary-dark[_ngcontent-%COMP%]{color:var(--primary-dark)}.text-text-dark[_ngcontent-%COMP%]{color:var(--text-dark)}.hover\\:bg-primary-dark[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark)}.hover\\:bg-green-600[_ngcontent-%COMP%]:hover{background-color:#059669}.hover\\:text-primary-dark[_ngcontent-%COMP%]:hover{color:var(--primary-dark)}.focus\\:ring-primary[_ngcontent-%COMP%]:focus{--tw-ring-color: var(--primary);box-shadow:0 0 0 2px var(--primary)}.bg-white[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .4s ease-out;transition:all .2s ease}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}button[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{touch-action:manipulation;-webkit-tap-highlight-color:transparent}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, button[_ngcontent-%COMP%]:focus{outline:2px solid var(--primary);outline-offset:2px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:16px;-webkit-appearance:none;border-radius:8px}.text-gray-700[_ngcontent-%COMP%]{color:#374151}.text-gray-600[_ngcontent-%COMP%]{color:#4b5563}@media (min-width: 768px){.px-4[_ngcontent-%COMP%]{padding-left:2rem;padding-right:2rem}.bg-white[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000001a}button[_ngcontent-%COMP%]{width:auto!important}h1[_ngcontent-%COMP%]{font-size:2rem!important}h2[_ngcontent-%COMP%]{font-size:1.5rem!important}.p-4[_ngcontent-%COMP%]{padding:2rem}.space-y-6[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:0}.space-y-6[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:0}}@media (min-width: 1024px){.px-4[_ngcontent-%COMP%]{max-width:1200px;margin-left:auto;margin-right:auto}.space-y-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-top:0}.space-y-4[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-last-child(-n+2){grid-column:1/-1}.space-y-4[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:0}}*[_ngcontent-%COMP%]{scroll-behavior:smooth}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation:none!important;transition:none!important}}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important;color:#384050}@media (prefers-color-scheme: dark){.bg-white[_ngcontent-%COMP%]{background-color:#fff!important;color:#384050!important}.text-gray-700[_ngcontent-%COMP%]{color:#374151!important}.border-gray-100[_ngcontent-%COMP%]{border-color:#e5e7eb!important}}'],changeDetection:0})}}return n})();export{Oe as ArtisanDetailsComponent};
